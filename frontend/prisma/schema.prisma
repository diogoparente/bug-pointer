generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Contest {
  contestAddress           String                   @id
  sponsor                  String
  overview                 String
  scope                    String
  outOfScope               String
  links                    String
  name                     String
  startAt                  DateTime
  closeAt                  DateTime
  prize                    String
  submittedVulnerabilities SubmittedVulnerability[]
  filteredVulnerabilities  FilteredVulnerability[]
}

model FilteredVulnerability {
  id                       Int                      @id @default(autoincrement())
  name                     String
  proofOfConcept           String
  severity                 String
  contestAddress           String
  Contest                  Contest                  @relation(fields: [contestAddress], references: [contestAddress], onDelete: NoAction, onUpdate: NoAction)
  submittedVulnerabilities SubmittedVulnerability[]
}

model SubmittedVulnerability {
  id                      Int                    @id @default(autoincrement())
  contestAddress          String
  name                    String
  proofOfConcept          String
  ownerAddress            String
  filteredVulnerabilityId Int?
  FilteredVulnerability   FilteredVulnerability? @relation(fields: [filteredVulnerabilityId], references: [id])
  Contest                 Contest                @relation(fields: [contestAddress], references: [contestAddress], onDelete: NoAction, onUpdate: NoAction)
}
